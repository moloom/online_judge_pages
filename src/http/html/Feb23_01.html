<!--监视属性-->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>监视属性</title>

        <script type="text/javascript" src="../vue.js"></script>
    </head>
    <body>
        

        <div id="root">
            <h2 style="color: red;">今天天气是{{info}}</h2>
            <button @click ="change">点我改变天气!</button>
            <hr/>
            <h2>numbers:{{numbers.a}}</h2><br/>
            <h2>numbers:{{numbers.b}}</h2>
            <button @click ="numbers.a++">点我改变a!</button>
            <button @click ="numbers.b++">点我改变b!</button>
        </div>
        <script type="text/javascript" >
            Vue.config.productionTip=false


            const vm = new Vue({
                data:{
                    isHot:true,
                    numbers:{
                        a:1,
                        b:2,
                        c:3
                    }
                },
                computed:{
                    info(){
                        return this.isHot ?"hot":"cold"
                    }
                },
                methods: {
                    change(){
                        this.isHot=!this.isHot;
                    }
                },
                watch:{
                    isHot:{
                        immediate:true, //初始时就执行handler
                        handler(newValue,oldValue){
                            console.log(newValue+"\t"+oldValue);
                        }
                    },
                    //简写形式，相当于直接在handle中写
                    "numbers.c"(newValue,oldValue){
                        console.log(newValue+"\t"+oldValue);
                    }
                }
            })
            vm.$mount("#root");

            //简写形式
            // vm.$watch("isHot",function(newValue,oldValue){
            //         console.log(newValue+"\t"+oldValue);
            //     }
            // )

            //只监视numbers中的a
            vm.$watch("numbers.a",{
                handler(){
                    console.log("change-1");
                }
            })
            //监视numbers中的所有
            vm.$watch("numbers",{
                deep:true,  //开启深度监视
                handler(){
                    console.log("change-2");
                }
            })
        </script>
    </body>
</html>